/* lux-audio-mode.css */
/* Small Liquid-Glass Audio Mode Toggle (Normal / Pro)
   - Record/Stop stay centered
   - Toggle sits offset to the right of Stop
   - Transparent pill + sliding glass knob
*/

:root{
  --lux-blue: #0078d7;
}

/* ===============================
   Practice dock row wrapper
   (audio-mode-switch.js wraps .btn-group with this)
   =============================== */
.lux-rec-actions{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:18px;
  margin: 10px auto 14px;
  flex-wrap:wrap;
}

/* Ensure the record/stop group stays clean */
.lux-rec-actions .btn-group{
  margin: 0 !important;
  position: relative;      /* allows floating toggle positioning */
  overflow: visible;       /* tooltips must not clip */
}

/* ===============================
   Wrapper + label
   =============================== */
.lux-audioModeWrap{
  display:flex;
  align-items:center;
  gap:8px;

  font: 900 11px/1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  letter-spacing: 0.02em;

  user-select:none;
  z-index: 50;
}

/* “Audio” label — subtle, not heavy */
.lux-audioModeLabel{
  opacity: 0.55;
  font-weight: 950;
}

/* When inserted after Stop */
.btn-group .lux-audioModeWrap.is-rightOfStop{
  margin-left: 12px;
}

/* When we float it (so it does NOT shift Record/Stop centering) */
.btn-group .lux-audioModeWrap.is-floatDock{
  position: absolute;
  margin-left: 0 !important;
}

/* ===============================
   Glass pill shell
   =============================== */
.lux-audioToggle{
  position: relative;
  display: inline-flex;
  align-items: center;

  padding: 3px;
  border-radius: 999px;

  /* ✅ transparent glass */
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.22);

  box-shadow:
    0 10px 24px rgba(0,0,0,0.14),
    inset 0 1px 0 rgba(255,255,255,0.22);

  backdrop-filter: blur(16px) saturate(1.25);
  -webkit-backdrop-filter: blur(16px) saturate(1.25);

  overflow: visible; /* ✅ bring tooltips back */
}

/* Optional tiny “premium” outline when in Pro mode */
html[data-lux-audio-mode="pro"] .lux-audioToggle{
  box-shadow:
    0 12px 28px rgba(0,0,0,0.16),
    inset 0 1px 0 rgba(255,255,255,0.22),
    0 0 0 1px rgba(0,120,215,0.10);
}

/* ===============================
   Sliding inner glass knob
   =============================== */
.lux-audioKnob{
  position:absolute;
  top: 3px;
  bottom: 3px;
  left: 3px;
  width: calc(50% - 3px);
  border-radius: 999px;
  z-index: 1;

  /* ✅ glass-on-glass (transparent) */
  background:
    radial-gradient(circle at 30% 25%,
      rgba(255,255,255,0.60),
      rgba(255,255,255,0.18) 58%,
      rgba(255,255,255,0.06)
    ),
    linear-gradient(180deg,
      rgba(255,255,255,0.34),
      rgba(255,255,255,0.10)
    );

  border: 1px solid rgba(255,255,255,0.30);

  box-shadow:
    0 8px 16px rgba(0,0,0,0.12),
    inset 0 1px 0 rgba(255,255,255,0.36);

  transition: transform 240ms cubic-bezier(.2,.9,.2,1);
  will-change: transform;

  overflow: hidden; /* keeps sheen neat */
}

/* knob slides right in pro mode */
html[data-lux-audio-mode="pro"] .lux-audioKnob{
  transform: translateX(100%);
}

/* subtle sheen streak on hover */
.lux-audioKnob::after{
  content:"";
  position:absolute;
  inset:-45% -70%;
  background: linear-gradient(
    110deg,
    rgba(255,255,255,0) 35%,
    rgba(255,255,255,0.55) 48%,
    rgba(255,255,255,0) 62%
  );
  transform: translateX(-45%) rotate(8deg);
  opacity: 0;
  pointer-events:none;
}

.lux-audioToggle:hover .lux-audioKnob::after{
  opacity: 0.70;
  animation: luxSheen 1.05s ease both;
}

@keyframes luxSheen{
  from { transform: translateX(-45%) rotate(8deg); }
  to   { transform: translateX(45%)  rotate(8deg); }
}

/* ===============================
   Buttons (must NOT look like big blue buttons)
   =============================== */
.lux-audioOpt{
  position:relative;
  z-index:2;

  appearance:none;
  border:0;
  background: transparent !important;
  box-shadow: none !important;

  padding: 7px 12px;
  border-radius: 999px;

  font-weight: 950;
  font-size: 12px;
  cursor:pointer;

  color: rgba(15,23,42,0.44); /* hollow/grey when inactive */
  transition: transform .12s ease, color .16s ease, opacity .14s ease;
}

.lux-audioOpt:hover{
  transform: translateY(-1px);
  color: rgba(15,23,42,0.70);
}

/* ✅ Active mode = Lux blue text */
html[data-lux-audio-mode="normal"] .lux-audioOpt[data-mode="NORMAL"],
html[data-lux-audio-mode="pro"] .lux-audioOpt[data-mode="PRO"]{
  color: var(--lux-blue);
  text-shadow:
    0 1px 0 rgba(255,255,255,0.25),
    0 10px 22px rgba(0,0,0,0.10);
}

/* dim the inactive one a bit */
html[data-lux-audio-mode="normal"] .lux-audioOpt[data-mode="PRO"],
html[data-lux-audio-mode="pro"] .lux-audioOpt[data-mode="NORMAL"]{
  opacity: 0.58;
}

/* ===============================
   Subtle bump confirmation
   =============================== */
.lux-audioToggle.is-bump .lux-audioKnob{
  animation: luxKnobBump 320ms ease;
}

@keyframes luxKnobBump{
  0%   { filter: brightness(1); }
  45%  { filter: brightness(1.18); }
  100% { filter: brightness(1); }
}

/* ===============================
   Tooltip bubbles (restored)
   =============================== */
.lux-audioOpt[data-tip]::after{
  content: attr(data-tip);
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(100% + 10px);

  width: min(320px, 62vw);
  padding: 9px 11px;
  border-radius: 14px;

  background: rgba(15, 23, 42, 0.92);
  color: rgba(255, 255, 255, 0.95);

  font-weight: 800;
  line-height: 1.25;

  box-shadow: 0 14px 34px rgba(0,0,0,0.30);

  opacity: 0;
  pointer-events: none;
  transition: opacity 140ms ease;

  white-space: normal;
  z-index: 999;
}

.lux-audioOpt[data-tip]:hover::after{
  opacity: 1;
}

/* motion accessibility */
@media (prefers-reduced-motion: reduce){
  .lux-audioKnob,
  .lux-audioOpt{
    transition: none !important;
  }
  .lux-audioToggle:hover .lux-audioKnob::after{
    animation: none !important;
  }
}
