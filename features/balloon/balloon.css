/* features/balloon/balloon.css */

/* Container: Drifts BROADLY across the screen */
#lux-balloon-wrapper {
  position: fixed;
  bottom: 40px; 
  right: 40px;
  width: 100px;
  height: 180px; 
  z-index: 9999;
  pointer-events: none;
  
  /* CHAOTIC FLOAT: Prime numbers (7s, 5s) prevent sync */
  animation: 
    wanderX 7s ease-in-out infinite alternate,
    wanderY 5s ease-in-out infinite alternate;
  
  transition: bottom 0.5s ease; 
}

/* --- The Balloon (Sphere) --- */
#lux-balloon {
  /* Default Scale Variable (Modified by JS) */
  --scale: 1;
  
  width: 50px;
  height: 62px;
  border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
  
  /* 3D Shading */
  background: radial-gradient(circle at 35% 35%, 
              rgba(255,255,255,0.8) 0%, 
              rgba(255,255,255,0.2) 20%, 
              transparent 50%);
              
  box-shadow: 
    inset -5px -5px 15px rgba(0,0,0,0.4), 
    inset 2px 2px 5px rgba(255,255,255,0.4), 
    2px 8px 15px rgba(0,0,0,0.3); 
    
  pointer-events: auto;
  
  /* CURSOR: Tack ðŸ“Œ */
  cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' style='font-size:24px'><text y='24'>ðŸ“Œ</text></svg>") 0 20, pointer;
  
  /* Apply the scale variable here so transitions work */
  transform: scale(var(--scale));
  transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  
  position: absolute;
  top: 20%; 
  left: 50%;
  margin-left: -25px; 
  margin-top: -31px;  
  
  /* Wobble uses the variable to preserve size */
  animation: balloonWobble 6s ease-in-out infinite alternate;
}

/* Shine */
#lux-balloon::before {
  content: "";
  position: absolute;
  top: 15%;
  left: 20%;
  width: 12px;
  height: 20px;
  border-radius: 50%;
  background: rgba(255,255,255,0.7);
  transform: rotate(-45deg);
  filter: blur(1px);
}

/* --- THE STRING (Randomized & White) --- */
#lux-balloon::after {
  content: "";
  position: absolute;
  top: 96%; /* Attached to bottom */
  left: 50%; /* Center */
  
  width: 25px; /* Width accommodates curve */
  height: 65px; /* Long tail */
  
  /* COLOR FIX: Pure White + Crisp Shadow (No Brown) */
  border-left: 2px solid #ffffff;
  filter: drop-shadow(1px 1px 1px rgba(0,0,0,0.3));
  
  /* PHYSICS: Anchor Top-Left (Base of Balloon) */
  transform-origin: top left; 
  
  /* TWO LAYERS OF CHAOS */
  animation: 
    stringSway 3.1s ease-in-out infinite alternate,
    stringCurl 2.3s ease-in-out infinite alternate-reverse;
}


/* --- ANIMATION KEYFRAMES --- */

/* Balloon Wobble: MUST INCLUDE SCALE VARIABLE */
@keyframes balloonWobble {
  0% { transform: scale(var(--scale)) rotate(-3deg); }
  100% { transform: scale(var(--scale)) rotate(3deg); }
}

/* Drastic Side-to-Side (80px Range) */
@keyframes wanderX {
  0% { transform: translateX(-40px); } 
  100% { transform: translateX(40px); }
}

/* Up/Down (Vertical Drift) */
@keyframes wanderY {
  0% { transform: translateY(0px); }
  100% { transform: translateY(-30px); }
}

/* String Sway (Pendulum) */
@keyframes stringSway {
  0% { transform: rotate(10deg); }
  100% { transform: rotate(-10deg); }
}

/* String Curl (Shape Morpher) */
@keyframes stringCurl {
  0% { border-bottom-left-radius: 0%; }   /* Straight */
  50% { border-bottom-left-radius: 40%; } /* Slight Hook */
  100% { border-bottom-left-radius: 80%; } /* Deep Hook */
}


/* --- Tooltip --- */
#lux-balloon-tip {
  position: absolute;
  right: 130%; /* Push further left */
  top: 30%;
  background: #1e293b;
  color: #fff;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 700;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s, transform 0.2s;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
#lux-balloon:hover + #lux-balloon-tip {
  opacity: 1;
  transform: translateX(-5px);
}

/* --- CONFETTI --- */
.lux-confetti {
  position: absolute;
  width: 8px;
  height: 8px;
  top: 30%; 
  left: 50%;
  opacity: 1;
  pointer-events: none;
  border-radius: 2px;
}

@keyframes confettiFall {
  0% { 
    transform: translate(0,0) rotate(0deg); 
    opacity: 1; 
    animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  35% { 
    transform: translate(var(--x-mid), var(--y-up)) rotate(180deg); 
    opacity: 1;
    animation-timing-function: cubic-bezier(0.42, 0, 1, 1);
  }
  100% { 
    transform: translate(var(--x-end), 300px) rotate(720deg); 
    opacity: 0; 
  }
}