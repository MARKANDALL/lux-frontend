/* ui/warp.css — Edge Year-in-Review-ish warp
   Goals:
   - No diagonal “band” streaks
   - Soft bloom + center push
   - Subtle radial motion lines (very faint)
   - Transform/opacity driven (less choppy)
*/

#lux-warp{
  position: fixed;
  inset: 0;
  z-index: 999999;
  pointer-events: none;
  opacity: 0;
  display: none;
  isolation: isolate;
  will-change: opacity, transform;
}

#lux-warp::before,
#lux-warp::after{
  content: "";
  position: absolute;
  inset: -20%;
  transform: translateZ(0);
  will-change: opacity, transform;
}

/* Layer 1: soft Edge-like bloom / haze */
#lux-warp::before{
  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.28), rgba(255,255,255,0) 54%),
    radial-gradient(circle at 24% 30%, rgba(0,120,215,0.18), rgba(0,0,0,0) 62%),
    radial-gradient(circle at 78% 70%, rgba(124,77,255,0.16), rgba(0,0,0,0) 66%),
    radial-gradient(circle at 62% 34%, rgba(255,159,10,0.10), rgba(0,0,0,0) 60%);
  opacity: 0;
  filter: saturate(1.08);
}

/* Layer 2: subtle radial “warp” spokes (NOT diagonal stripes)
   We create faint spokes via repeating-conic-gradient,
   then fade them with a radial mask so they only show mid-screen.
*/
#lux-warp::after{
  background:
    repeating-conic-gradient(
      from 0deg,
      rgba(255,255,255,0) 0deg 6deg,
      rgba(255,255,255,0.20) 6deg 6.6deg,
      rgba(255,255,255,0) 6.6deg 12deg
    );
  opacity: 0;
  /* Fade center + fade edges (Edge-like subtlety) */
  -webkit-mask: radial-gradient(circle at 50% 50%,
    rgba(0,0,0,0) 0%,
    rgba(0,0,0,0.9) 24%,
    rgba(0,0,0,0.8) 62%,
    rgba(0,0,0,0) 86%
  );
  mask: radial-gradient(circle at 50% 50%,
    rgba(0,0,0,0) 0%,
    rgba(0,0,0,0.9) 24%,
    rgba(0,0,0,0.8) 62%,
    rgba(0,0,0,0) 86%
  );
  mix-blend-mode: screen;
}

#lux-warp.is-on{ display:block; }

#lux-warp.is-out{
  animation: luxWarpOut 200ms cubic-bezier(.18,.9,.2,1) both;
}
#lux-warp.is-in{
  animation: luxWarpIn 240ms cubic-bezier(.2,.8,.2,1) both;
}

/* OUT: quick brighten + slight zoom forward */
#lux-warp.is-out::before{
  animation: luxBloomOut 200ms cubic-bezier(.18,.9,.2,1) both;
}
#lux-warp.is-out::after{
  animation: luxSpokesOut 200ms cubic-bezier(.18,.9,.2,1) both;
}

/* IN: settle back down */
#lux-warp.is-in::before{
  animation: luxBloomIn 240ms cubic-bezier(.2,.8,.2,1) both;
}
#lux-warp.is-in::after{
  animation: luxSpokesIn 240ms cubic-bezier(.2,.8,.2,1) both;
}

@keyframes luxWarpOut{
  0%   { opacity:0; transform: scale(1); }
  100% { opacity:1; transform: scale(1.02); }
}
@keyframes luxWarpIn{
  0%   { opacity:1; transform: scale(1.02); }
  100% { opacity:0; transform: scale(1); }
}

@keyframes luxBloomOut{
  0%   { opacity:0; transform: scale(0.995); }
  100% { opacity:0.92; transform: scale(1.03); }
}
@keyframes luxBloomIn{
  0%   { opacity:0.92; transform: scale(1.03); }
  100% { opacity:0; transform: scale(1.00); }
}

/* Spokes: very faint “speed” feel */
@keyframes luxSpokesOut{
  0%   { opacity:0; transform: scale(0.96); }
  100% { opacity:0.55; transform: scale(1.22); }
}
@keyframes luxSpokesIn{
  0%   { opacity:0.55; transform: scale(1.22); }
  100% { opacity:0; transform: scale(1.02); }
}

@media (prefers-reduced-motion: reduce){
  #lux-warp, #lux-warp::before, #lux-warp::after{ animation: none !important; }
}
