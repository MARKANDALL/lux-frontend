/* lux-results.accordion.css */
/* Word/Phoneme accordion pill handle (end-of-file rules) */

/* ============================================================
   Word & Phoneme: match drawer tab chrome + dual chevrons + flush open frame
   ============================================================ */

/* Make the accordion container match drawer width/padding */
#prettyResult details.lux-results-accordion{
  max-width: 1100px;
  margin: 18px auto 0;
  padding: 0 16px;
}

/* kill native marker */
#prettyResult details.lux-results-accordion > summary::-webkit-details-marker{ display:none; }
#prettyResult details.lux-results-accordion > summary::marker{ content:""; }

/* Tab chrome (match AI Coach / My Progress) */
#prettyResult details.lux-results-accordion > summary.lux-results-accordion-handle{
  position: relative !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 10px !important;

  padding: 12px 14px !important;
  padding-left: 44px !important;   /* room for LEFT chevron */
  padding-right: 44px !important;  /* room for RIGHT chevron */

  border-radius: 16px !important;

  background: rgba(255,255,255,0.78) !important;
  border: 1px solid rgba(15,23,42,0.10) !important;
  box-shadow: 0 10px 24px rgba(15,23,42,0.05) !important;
  transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, background 160ms ease !important;

  cursor: pointer !important;
  user-select: none !important;
  list-style: none !important;
}

/* Closed hover lift like the drawers */
#prettyResult details.lux-results-accordion:not([open]) > summary.lux-results-accordion-handle:hover{
  transform: translateY(-1px) !important;
  border-color: rgba(15,23,42,0.16) !important;
  background: rgba(255,255,255,0.88) !important;
  box-shadow: 0 14px 30px rgba(15,23,42,0.08) !important;
}
#prettyResult details.lux-results-accordion:not([open]) > summary.lux-results-accordion-handle:active{
  transform: translateY(0) !important;
}

/* Remove the old “chevron next to the text” if present */
#prettyResult .lux-acc-chev{ display: none !important; }

/* LEFT + RIGHT chevrons pinned to the extremes */
#prettyResult details.lux-results-accordion > summary.lux-results-accordion-handle::before,
#prettyResult details.lux-results-accordion > summary.lux-results-accordion-handle::after{
  content: "▾";
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.65;
  transition: transform 160ms ease;
  font-weight: 900;
  line-height: 1;
}
#prettyResult details.lux-results-accordion > summary.lux-results-accordion-handle::before{ left: 14px; }
#prettyResult details.lux-results-accordion > summary.lux-results-accordion-handle::after{ right: 14px; }

/* Rotate both chevrons when open (down -> up) */
#prettyResult details.lux-results-accordion[open] > summary.lux-results-accordion-handle::before,
#prettyResult details.lux-results-accordion[open] > summary.lux-results-accordion-handle::after{
  transform: translateY(-50%) rotate(180deg);
}

/* Open state: tab becomes the “top” of a flush frame (like drawers) */
#prettyResult details.lux-results-accordion[open] > summary.lux-results-accordion-handle{
  border-bottom-left-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
  border-bottom-color: rgba(15,23,42,0.06) !important;
}

/* Open state: frame the content immediately under the tab */
#prettyResult details.lux-results-accordion[open] > summary.lux-results-accordion-handle + *{
  margin-top: 0 !important;
  border: 1px solid rgba(15,23,42,0.10) !important;
  border-top: 0 !important;
  border-bottom-left-radius: 16px !important;
  border-bottom-right-radius: 16px !important;
  overflow: visible !important; /* allow Prosody Key to float above the frame */
  background: rgba(255,255,255,0.65) !important;
  box-shadow: 0 10px 24px rgba(15,23,42,0.05) !important;
}

/* label styles */
#prettyResult .lux-acc-label{
  font-weight: 800 !important;
  color: #1e293b !important;
  font-size: 0.95rem !important;
  line-height: 1 !important;
  white-space: nowrap !important;
}

/* Open/Close pills (Word & Phoneme) */
#prettyResult details.lux-results-accordion .lux-drawer-action--open{ left: 44px; }
#prettyResult details.lux-results-accordion .lux-drawer-action--close{ right: 44px; }
#prettyResult details.lux-results-accordion .lux-drawer-action--close{
  opacity: 0;
  transform: translateY(-50%) translateX(6px);
}
#prettyResult details.lux-results-accordion[open] .lux-drawer-action--open{
  opacity: 0;
  transform: translateY(-50%) translateX(-6px);
}
#prettyResult details.lux-results-accordion[open] .lux-drawer-action--close{
  opacity: 1;
  transform: translateY(-50%) translateX(0);
}

/* ============================================================
   Match drawer tab vertical depth (Word & Phoneme closed/open)
   ============================================================ */

#prettyResult details.lux-results-accordion > summary.lux-results-accordion-handle{
  min-height: 46px !important;     /* match AI Coach / My Progress closed height */
  padding-top: 10px !important;
  padding-bottom: 10px !important;
}

/* ============================================================
   Scores accordion (Overall ring always visible)
   ============================================================ */

#prettyResult details.lux-results-accordion--scores{
  /* keep this one tighter under "Your Results:" */
  margin: 10px auto 0 !important;
}

#prettyResult details.lux-results-accordion--scores > summary.lux-results-accordion-handle{
  overflow: visible !important; /* allow the big ring to overlap above the bar */
}

#prettyResult .lux-scoreAccRing{
  position: absolute;
  left: 50%;
  bottom: -10px;               /* sit on the bar bottom (compensate for 10px summary padding) */
  transform: translateX(-50%);
  z-index: 2;
}

#prettyResult .lux-scoreAccWord{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-weight: 900;
  color: #1e293b;
  font-size: 0.95rem;
  line-height: 1;
  white-space: nowrap;
  opacity: 0.92;
  pointer-events: none;        /* clicking the words still toggles the accordion */
}

#prettyResult .lux-scoreAccWord--left{
  right: calc(50% + 60px);
}

#prettyResult .lux-scoreAccWord--right{
  left: calc(50% + 60px);
}

#prettyResult .lux-scoreAccBody{
  padding: 14px 12px 12px;
  display: flex;
  justify-content: center;
}

/* ============================================================
   Unified Open/Close hint (INFO tag, not a button)
   Applies to: Scores + Word & Phoneme accordions
   ============================================================ */
#prettyResult .lux-results-accordion-handle{
  position: relative !important;
}

#prettyResult .lux-toggleHint{
  position: absolute;
  left: 54px;                 /* between LEFT chevron (14px) and centered title */
  top: 50%;
  transform: translateY(-50%);

  font-size: 0.82rem;
  font-weight: 900;
  padding: 3px 10px;
  border-radius: 8px;         /* NOT a pill */
  border: 1px solid transparent;
  user-select: none;
  pointer-events: none;       /* not clickable */
  white-space: nowrap;
}

/* Show the right word for the open state */
#prettyResult details.lux-results-accordion .lux-toggleHint--open{ display:none; }
#prettyResult details.lux-results-accordion[open] .lux-toggleHint--open{ display:inline-block; }
#prettyResult details.lux-results-accordion[open] .lux-toggleHint--closed{ display:none; }

/* Closed = Open (green info) */
#prettyResult details.lux-results-accordion:not([open]) .lux-toggleHint--closed{
  color: #14532d;
  background: rgba(34,197,94,0.10);
  border-color: rgba(34,197,94,0.18);
}

/* Open = Close (red info) */
#prettyResult details.lux-results-accordion[open] .lux-toggleHint--open{
  color: #7f1d1d;
  background: rgba(239,68,68,0.10);
  border-color: rgba(239,68,68,0.18);
}

/* Center title for Word & Phoneme bar */
#prettyResult .lux-acc-title{
  font-weight: 900;
  color: #0f172a;
}

/* ============================================================
   Nudge (Option A): subtle breathe + soft glow, only when CLOSED
   ============================================================ */
@keyframes luxNudge{
  0%   { transform: translateY(0) scale(1); }
  45%  { transform: translateY(-1px) scale(1.01); }
  100% { transform: translateY(0) scale(1); }
}
@keyframes luxHintPulse{
  0%   { opacity: 0.85; }
  45%  { opacity: 1; }
  100% { opacity: 0.92; }
}

#prettyResult details.lux-results-accordion.lux-nudge > summary.lux-results-accordion-handle{
  animation: luxNudge 700ms ease 1;
  box-shadow: 0 0 0 3px rgba(37,99,235,0.10);
}

#prettyResult details.lux-results-accordion.lux-nudge:not([open]) .lux-toggleHint--closed{
  animation: luxHintPulse 700ms ease 1;
}

@media (prefers-reduced-motion: reduce){
  #prettyResult details.lux-results-accordion.lux-nudge > summary.lux-results-accordion-handle{
    animation: none !important;
  }
  #prettyResult details.lux-results-accordion.lux-nudge .lux-toggleHint{
    animation: none !important;
  }
}
